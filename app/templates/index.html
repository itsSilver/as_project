<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>首页</title>
    <link rel="stylesheet" href="/static/layer/theme/default/layer.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script src="/static/js/jquery-3.3.1.js"></script>
    <script src="/static/layer/layer.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <style>
        body {
            padding-top: 40px;
            padding-bottom: 40px;
            background-color: #eee;
        }

        .form-signin {
            max-width: 330px;
            padding: 15px;
            margin: 0 auto;
        }

        .form-control {
            margin-top: 6px;
            height: 50px;
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="form-signin">
            <button class="btn_add btn btn-lg btn-primary btn-block" type="submit">添加爬虫任务</button>
            <button class="btn_login btn btn-lg btn-primary btn-block" type="submit">登陆目标网址</button>
        </div>
        <table class="table">
            <tr>
                <td>序号</td>
                <td>网址</td>
                <td>类型</td>
            </tr>
        </table>
    </div>

    <!-- 需要弹出的添加任务链接 -->
    <div class='start_spider' id="start_spider" style="display: none;">
        <input id='urls' style="width:420px;margin-left:20px;margin-top:50px" name='spider_urls'  type="text" class="form-control urls" placeholder="请输入网址">
        <select style="width:420px;margin-left:20px;margin-top:10px" name="category" id="category" class="form-control">
            <!-- <option value="0">请选择...</option> -->
            <option value="类型1">类型1</option>
            <option value="类型2">类型2</option>
            <option value="类型3">类型3</option>
        </select>
    </div>

    <!-- 跳转登陆页面 -->
    <div class='login_herf' id="login_herf" style="display: none;">
        <input id='herfs' style="width:420px;margin-left:20px;margin-top:50px" name='herf'  type="text" class="form-control" placeholder="请输入网址">
    </div>
</body>
<script>
    $(function() {
        var vals = "类型1"
        var url_arr = new Array() 
        $('#category').change(function() {
           vals = $(this).val();
        });

        // 添加爬虫任务
        $('.btn_add').click(function() {
            layer.open({
                type: 1,
                title: '添加爬虫任务',
                shadeClose:true, 
                area: ['460px', '300px'],
                btn: ['开始', '退出'],
                content: $('#start_spider'),
                yes: function(index) {
                    now_urls = $('#urls').val();
                    url_arr.push(now_urls);
                    trs = "<tr><td>" + url_arr.length + "</td>" + "<td>" + now_urls + "</td>" + '<td>' + vals + '</td>' + "</td></tr>"
                    $('.table').children().first().append(trs)

                    // $.post("./",{urls:now_urls}, function(res){

                    // })
                    layer.close(index);
                }
            });
        });

        // 登陆目标网址
        $('.btn_login').click(function() {
            layer.open({
                type: 1,
                title: '登陆目标网址',
                shadeClose: true,
                area: ['460px', '300px'], 
                btn: ['跳转', '取消'],
                content: $('#login_herf'),
                yes: function() {
                    hrefs = $('#herfs').val();
                    location.href = "https://" + hrefs;
                }
            });
        });
    });
</script>
</html>